
% SECCIÓN: CÓMO MOLA Y FUNCIONA NUESTRA IMPLEMENTACIÓN, QUE ES EL FOCO DEL PAPER
% 
% TODO: Poner que a pesar de que el ejemplo descrito no es real ha sido for the sake of clarity, pero 
% que el sistema ha sido utilizado en supermercados y hospitales reales como está descrito en [1] noticia en castellano [2] paper nuestro hablando de ello en otra confe pasada
% 
\subsection{Motivational Case study}

Any experienced developer has probably devote too much time to apparently trivial tasks.
% These wastes of time often results in frustration.
One of these frustrating cases is often reusing functionalities from an already existing application.
These difficulties do not only appear on complex and inter-enterprise applications. % has podido ser incluso tú el causante
For instance, in \ac{ubicomp} environments, there are often many different types of devices running different small applications. % incompatible systems


% comentar que estos escenarios se retomarán en el capítulo 5 para enfatizar todo lo logrado?
To analyze the difficulties on reusing third application's functionalities (or directly data), let us present two sample applications.
The first application is developed on behalf of the risk prevention department of a company. % TODO prevención de riesgos
Using an already existing protocol (e.g. KNX), it monitors the temperature, the humidity and the $CO_2$ concentration provided by sensors deployed over an industrial facility.
Whenever any of these measures go beyond a determined threshold, the company needs to take the proper action.



% Ideas:
% integración: cada app en su propio protocolo, usando un sistema de integración distinto
%    cada cosa puede ser apropiada para su propia mierda
%    HTTP y REST nos permiten definir APIs
% gateways: a nivel de comunicación o de application
% cuanto más distintos sean las aproximaciones usadas (protocolo y app integration), más complejo será hacerlo
% interoperability: reusar datos directamente
%    JSON y demás: necesitas entenderlo
%    modelos de datos comunes (basados en lógica?)
%    mecanismos adicionales para flexibilizar ese requisito

\subsection{Application 1: Security}

A security company can develop an application which monitors different parameters such as the temperature,
the humidity or the $CO_2$ concentration with different sensors deployed over an industrial facility.
Whenever any of these measures go beyond a determined threshold, the company needs to take the proper action.
To respond to the potential risks the application creates tasks with different priorities:
when a unimportant parameter is outside the expected boundaries the application can write a low priority task for the security manager into the space
(e.g. the $CO_2$ is slightly higher than the normal one),
but to warn about an emergency to the users in the facility a high priority one can be written
(e.g. when they must leave the building).
Then, the message is consumed by different actuators according to its priority
(e.g. in the manager's phone in a less intrusive manner or through visual or auditory alarms over the building).

The company can also develop a simpler version of the same application for the workers' personal mobile phones to ensure that they are warned even if the alarms of the main application fail.
To implement both versions of the application, commonly used ontologies such as
\ac{ssn}\footnote{\url{http://www.w3.org/2005/Incubator/ssn/ssnx/ssn}} or
\ac{sweet}\footnote{\url{http://sweet.jpl.nasa.gov}} can be used,
storing and sharing the triples detailed in Listing~\ref{lst:security} in a graph.


\subsection{Application 2: Home automation}

On the one hand, a room is populated with several kind of sensors:
\textit{Digi's XBee Sensors} with a \textit{Digi's IP gateway}
and a FoxG20\footnote{\url{http://www.acmesystems.it}} embedded platform connected to sensors and actuators.
Besides, an Android application semantically stores the user's temperature preferences.
An independent node (master node) continuously checks the room temperature using \textit{read primitive} to get the first available graph where the last measure is defined (no matter which device provides that information) and the user's desired temperature.
When the second one is below the first one, it generates a ``decrease temperature during a certain period'' task which can be consumed by different independent worker nodes.
In this case, the FoxG20 periodically checks just for orders it can fulfill and it understands and consumes them with a \textit{take primitive}.

Once again common ontologies such as \ac{ssn},
\ac{muo}\footnote{\url{http://tinyurl.com/MeasurementUO}} or
\ac{reco}\footnote{\url{http://tinyurl.com/RECommendationsO}} are used to express these relations.
Sample triples provided by the mobile phone can be found in Listing~\ref{lst:home-automation}.


\subsection{Interoperability}

\begin{sloppypar}
Given that both systems use a common ontology called \ac{ssn} and providing they use a common space in \ac{tsc},
whenever the Security application asks for triples matching a template \codigo{?s rdf:type sweet:Temperature},
the Home automation application would return \codigo{wot:mes3 rdf:type sweet:Temperature} along with other information stored in that graph.
Therefore, the Security application would be able to retrieve information from another application it does not even know.
In the same way, it is feasible that the Home automation application also retrieves information stored by the Security application in the same or other nodes.
\end{sloppypar}

The key for this interoperability process is that both applications are using the same language, since both are using the same concepts of the same ontologies (e.g. \ac{ssn}).
Although this can be achieved mapping concepts from two different ontologies with a semantic web reasoner through the \codigo{owl:sameAs} property, it is habitual to use common ontologies.
Furthermore, since all the applications should be interested in retrieving data from other potential ones, the developers should be willing to employ widely used ontologies to ease the information exchange among applications.