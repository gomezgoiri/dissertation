\section{Semantic Tuple Spaces}
\label{sec:tsc_soa}

% Tanasescu
% swarm
% decir que tiene mucho que ver con distributed triple stores
% analizarlos también??? vaya pereza! -> igual comentar diferencia y dejar el análisis para la sección tosca de IGWS

Semantic Tuple Spaces aim to join Tuple Spaces with the Semantic Web to propose a more uncoupled solution.
Particularly, it benefits from the autonomies introduced by both TS and the SW:

\begin{itemize}
  \item Space uncoupling.
  \item Time uncoupling.
  \item Data-schema uncoupling. % explicar?
% 	enhances the interoperability of the
% 	applications built on top of TSC. This way, two applications using standard ontologies can interact among them
% 	automatically enriching one each other, as long as they use the same space and standard and linked ontologies.
\end{itemize}


In this section we provide a review of the existing Semantic Tuple Spaces solutions. % citar nixon_tuplespace-based_2008 ???
To summarize, we present a comparison of them at the end of the section, analyzing their limitations.


\InsertFig{venn-sec3}{fig:venn_tuplespaces_semantics}{
  Semantic Tuple Spaces.
}{
  Scope of this section.
}{0.6}{}


\subsection{TSC}
% modelo propuesto
TSC \cite{fensel_tsc_2007} is the middleware which first implemented the ideas of Fensel et al. \cite{fensel_triple-space_2004}.
TSC aims to propose a Triple Space Computing infrastructure based on REST.
Equivalently to REST, TSC proposes a stateless infrastructure where the resources are identified by URIs.
In the first approximation, each tuple was considered a resource.
These tuples correspond with RDF triples.
In a later work,  Krummenacher et al. \cite{krummenacher2006specification} proposed to use identifiers just for a set of triples (i.e. RDF graphs).
% bundler cita el de "WWW: or what's wrong with the web" para explicar eso último
They argue that resources usually need to be modeled using more than just a triple.
Besides, the use of graphs reduces the complexity on storage.
To cope with the heterogeneity of data and scalability issues, they propose the use of independent spaces identified by their own URI.
Using these disjoint spaces, they can restrict the number of participant in each one.


% cosas relativas al despliegue
TSC combines client/server and peer-to-peer architectures using a hybrid super-peer one.
The super-peers of this architecture communicate with each other using a middleware which offers a virtual shared memory space of Java objects.
They present 3 different types of nodes:
\begin{itemize}
  \item The \emph{servers} are the responsible for storing and replicating the spaces.
  \item The \emph{heavy clients} are not always connected to the system, but they have the same responsibilities as the \emph{servers}.
	They can work off-line with their replicas.
  \item The \emph{light clients} can access to the spaces using proxies or an HTTP API.
\end{itemize}


% arquitectura
TSC consist of three main components: a mediation engine, a data access layer and a coordination layer.
The mediation engine manages data heterogeneity by intermediating between nodes using different data schemas.
The data access layer ensures persistence of the data, supports template matching and provides some reasoning over the knowledge stored.
The coordination layer replicates named graphs to all involved TS kernels and therefore has to be synchronized with the data access.
% http://tsc.deri.at/deliverables/D21.html
% http://tsc.deri.at/deliverables/D31/D31.html
To do that, they use a peer-to-peer implementation of a virtual shared data space. % cita a CORSO?
% decir que ofrece transaccionalidad gracias a CORSO? transactionality
% It also offers a transactional context and a simple form to publish and subscribe to certain patterns.



\subsection{Semantic Web Spaces}

% modelo propuesto
Semantic Web Spaces (SWS) defines two different data coordination views: data view and information view. %TODO CITE
In both views the tuples are represented with 3 fields which correspond with RDF triples' subject, predicate and subject.
The data view stores syntactically valid RDF and is accessed using Linda primitives.
The information view stores consistent and satisfiable data and offers new access primitives.
This view takes into account the knowledge defined by ontologies to perform semantic matching over inferred triples.

% cosas relativas al despliegue
SWS are virtually partitioned using contexts, which provide a simple form of access control.
Clients can allocate contexts to control their view privately or share it with other clients. % This allow clustering ¿WTF?
The different active spaces and the tuples they contain are represented in a meta-space using a meta-model ontology.
This ontology also allows to express the hierarchical relation between the spaces and security policies.
% por lo que entiendo, está centralizadísimo

% arquitectura
The prototype contains three main components: publication, retrieval and security.
The publication component describes how the platform communicates with the clients or storage managers.
The retrieval component process queries and can reason to enhance results. % no se razona cada vez que se inserta una tupla
The security component restrict the access of client to spaces according to the policies defined.  % hablan de agentes
% dicen que experimentaron problemas de escalabilidad



\subsection{sTuples}

% modelo propuesto
sTuples \cite{khushraj_stuples:_2004} was conceived by Nokia Research Center as a pervasive computing work.
It extends the JavaSpace middleware, a object-oriented Tuple Space, using a semantic match over the semantic tuples.
To do that, a semantic tuple is an object with a field with the semantic description in the DAML+OIL format. % definir DAML+OIL o citarlo?


% cosas relativas al despliegue
The space is centralized and uses a framework called Vigil to create clients and services. % cita Vigil?
Vigil acts as a communication gateway with several protocols and is directly integrated with sTuples.


% arquitectura
The JavaSpace extension is done in sTuples through two components: the Tuple Manager and the Tuple Matcher.
The manager adds, removes or states changes of tuples.
Every insertion requires the semantic data to be asserted.
The matcher implements the algorithm to matching templates.
Besides, specialized agents reside on the space to offer added functionality to the users.
For instance, they implemented recommendations, subscriptions and task-executions in their prototype.



\subsection{Conceptual Spaces}

% modelo propuesto
Conceptual Spaces, or CSpaces, were born to study the applicability of semantic Tuple Spaces to different scenarios including ubiquitous computing.
The tuples contain seven different fields enabling to express logic theories using different formal languages.
Other remarkable fields are used to define the version, specify the creator or to define to which subspaces the tuple belongs. % explicar los 7 campos?

% cosas relativas al despliegue
The spaces in CSpaces can be individual or shared.
The individual belongs to a single process and the shared one allows access to all the processes who have agreed on.

% arquitectura
%Es una IDEA y NO la habían IMPLEMENTADO (posteriormente hicieron un prototipo limitado para un paper de 2006).
They proposed the same three types of nodes as TSC.
They intended to implement individual spaces in heavy-clients and shared spaces in servers.
They first considered a centralized implementation for the shared-spaces, % lo dicen en la comparativa
and later on a P2P network of the nodes managing a shared-space. % paper de después
In any case, to the best of our knowledge, this conceptual exercise never went beyond a rather limited prototype.
% TODO confirmar 100%



\subsection{tsc++}

% modelo propuesto
Tsc++ \cite{krummenacher_open_2009} is a new version of the TSC project.
Therefore, although the model is equivalent to TSC, its implementation completely changes.


% cosas relativas al despliegue
Instead of replicating each space in the different kernels as TSC does, tsc++ proposes to divide the spaces among the participants.
Therefore, a space corresponds with a group a nodes on the \emph{Jxta} P2P framework \footnote{https://jxta.dev.java.net/}. % cita a blunder tb % jxta de otra forma?
These nodes follow a simple flooding-based strategy to distribute their information called \emph{negative broadcasting}.
In negative broadcasting each node writes the information locally and read querying to the rest of the nodes of the space.


% arquitectura
Tsc++ has 3 main components: the communication and the data access.
The data access layer relies on a semantic repository to perform queries and store the triples.
% mencionar que son Sesame \cite{broekstra_sesame:_2002} y Owlim \cite{kiryakov_owlimpragmatic_2005} ???
The communication layer maps the reading coordination primitives to group communication.
Besides, it offers a subscription mechanism independent to the content stored in the space which uses triples and templates as a basis.


% it does not make inference
% it does not allow expressive querying
% it has not been designed for devices with reduced computing capabilities, because tsc++ middleware focused on architecture and implementation in large scale and we focus in the short scale (local area networks with an intelligent environment).



\subsection{Triple Space Communication (TripCom)}

% modelo propuesto
TripCom\footnote{TripCom (IST-4-027324-STP, www.tripcom.org)} is a Triple Space solution which works with RDF triples as resources.
The most remarkable aspects of the model proposed by TripCom are:
\begin{itemize}
  \item The use of subspaces to form form nested multiple spaces.
	Using them it restricts the communication to a part of the whole space achieving local scalability and completeness.
  \item A mechanism to overlap spaces called \emph{scopes}.
	Using the scopes the client can have a temporary copy of some tuples.
	Insertion and deletion would not apply to the whole Triple Space.
  \item A meta-space to describe the relations between spaces or to which graph a tuple belongs.
  \item Different types of templates can be used to query the space, from simple wildcard-based templates to more expressive SPARQL queries.
  \item New primitives: read at triple or a graph level or writing multiple triples at once.
  \item A subscription mechanism.
\end{itemize}


% cosas relativas al despliegue
To access to a space a client needs to contact a TripCom instance, i.e. kernel.
Each kernel stores one or more subspaces and can contact other kernels responsible for different spaces.
To do that, if the space URL is provided, it simply resolves this URL using DNS to contact the other kernel.
Otherwise, the kernel uses 4 different strategies:
\begin{itemize}
  \item Triple Provider. It uses shortcuts to know who answered a query in the past.
  \item Recommender. It uses shortcuts to know which kernel successfully routed a query in the past.
  \item Indexing - DHT.
	It creates indexes using a hash function over the subject, predicate, object and space url.
	Then, it stores these indexes in a distributed database which relies in a structured P2P system. % mencionar PGrid???
\end{itemize}


% arquitectura
A TripCom kernel has several components which communicate with each other using a Tuple Space solution.
The most important components regarding how the triples are distributed are:
\begin{itemize}
  \item Triple Store Adapter.
	It acts as a gateway with the selected repository.
  \item Query Processor. It descomposes query into subqueries.
	Then, to answer each subquery the kernel: a) queries the local data store or b) forwards it to other kernel.
  \item Distribution Manager.
	Forwards queries or write requests to the appropiate kernels.
\end{itemize}
Apart from these, there are also security, mediation, metadata and transaction managers.
On top of these components, TripCom offers three different APIs:
Triple Space API to map the primitives,
web service API, which offers higher level service consumption API
and management API to configure the each kernel.



\subsection{Smart-M3}

% modelo propuesto
Smart-M3 is an open-source distributed middleware which uses RDF graphs. % CITA
It supports three types of primitives: Tuple Space-based primitives, subscriptions and a query over a whole space.
Smart-M3 defines two types of nodes: Semantic Information Brokers (SIB) and Knowledge Processors (KP).
The SIBs store the knowledge and perform reasoning process on behalf of the KPs.
A KP access to a SIB using two different types of interfaces (called KPI):
\begin{itemize}
  \item The low-level API uses triples as a base.
  \item The high-level API allows the developer to use ontological entities such as classes, relations and individuals.
\end{itemize}


% cosas relativas al despliegue
The space can be distributed over more than a SIB using a \emph{distributed deductive closure}. % CITA?
However, to the best of our knowledge no evaluation with more than a SIB has been presented yet, making it de facto an centralized space.
For the communication between SIBs and KPs, Smart-M3 defines a protocol called \emph{Smart Access Protocol (SSAP)}.
SSAP can be implemented on top of different communication mechanisms (e.g. SOA, XMPP, Bluetooth or TCP/IP) making the solution communication agnostic. % TODO acrónimos?


% arquitectura
A SIB is divided in 5 layers: transport, request handling, graph operations, triple operation and persistent store.
The transport layer has different processes for each communication mechanism supported.
Once the SSAP operations have been extracted, the request handling creates a thread for each primitive.
The graph operations work with primitives using RDF graphs and communicates with triple operations.
In the triple operation, expressive queries may need to be translated to query the store.
% decir que también soporta subscripción?

% dibujo?


\subsection{TuCSoN}

% modelo propuesto

% cosas relativas al despliegue

% arquitectura



\subsection{Conclusion} % comparison

% presentar características
% poner tabla
% extraer algunas conclusiones de lo que falta

% Parámetros para comparativa:
%	1. niveles de autonomía
%	2. centralizado / distribuído
%	3. centrado en ubicomp o no
%	4. basado en clientes tontos
%	5. Implementado?
%	6. Implementación disponible
%	7. Otras características
%	8. dependencias: librerias, etc. (para decir que lo nuestro se puede implementar en casi cualquier plataforma de forma fácil)


discussión de cómo se adaptan las distintas alternativas a ubicomp en cacharros


% data access, communication/coordination, subscripción

tsc++ \cite{krummenacher_open_2009} is a new version of the former TSC project\cite{fensel_triple-space_2004} which basically offers
the same API in a distributed way. To do that, tsc++ uses Jxta Peer To Peer \footnote{https://jxta.dev.java.net/} framework to perform the
coordination and Sesame \cite{broekstra_sesame:_2002} and Owlim \cite{kiryakov_owlimpragmatic_2005} to store triples of each peer.

This seems to adapt to
ubiquitous system, where different devices share heterogeneous data entering and leaving the system, compromising data consistency
and availability. In this aspect a sensor can provide information, but when it leaves the space, its information is automatically
removed from there since it is not longer available to the rest of the nodes. Anyway, as explained in section \ref{sec:services},
negative broadcasting needs to be adapted to those cases in which a device wants to remotely change the state of actuators managed
by another device.


TripCom\footnote{TripCom (IST-4-027324-STP, www.tripcom.org)} has different kernels hosted in servers which can distribute the semantic data
through themselves, but once again, is too server centered. TripCom clients are not part of the space and they could hardly be, because of
the complexity of this software which is oriented to run on powerful machines (it is designed to be able to run even different modules of the
same kernel in different machines).

TripCom\footnote{TripCom (IST-4-027324-STP, www.tripcom.org)} has different kernels hosted in servers which can distribute the semantic data
through themselves, but once again, is too server centered. TripCom clients are not part of the space and they could hardly be, because of
the complexity of this software which is oriented to run on powerful machines (it is designed to be able to run even different modules of the
same kernel in different machines).

None of this projects were fully distributed and they were deployed over more or less a client-based architecture which did not implement the tuplespace paradigm itself in mobile peers and which restricted the reasoning process to few powerful devices.


% Apoyar mi comparativa en lo que dice Bundler? (pag 16)
% El paper comparativo extrae un montón de características


% TODO CONCLUSION
Although both semantic space-based and Triple Spaces implementations exist, none of them has been specifically designed to be run in devices with constrained capabilities apart from our solution.