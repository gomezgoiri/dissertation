\section{Semantic \aclp{ts}}
\label{sec:soa_tsc}

% TODO
% Añadir  Citron (2005)? (eoa de Almeida)
% Tanasescu
% swarm
% decir que tiene mucho que ver con distributed triple stores
% analizarlos también??? vaya pereza! -> igual comentar diferencia y dejar el análisis para la sección tosca de IGWS

Semantic \aclp{ts} aim to join \aclp{ts} with the \acl{sw} to propose a more uncoupled solution.
Particularly, it benefits from the autonomies introduced by both \ac{ts} and the \ac{sw}:

\begin{itemize}
  \item Space uncoupling.
  \item Time uncoupling.
  \item Data-schema uncoupling. % explicar?
% 	enhances the interoperability of the
% 	applications built on top of TSC. This way, two applications using standard ontologies can interact among them
% 	automatically enriching one each other, as long as they use the same space and standard and linked ontologies.
\end{itemize}


In this section we provide a review of the existing Semantic \aclp{ts} solutions. % TODO citar nixon_tuplespace-based_2008 ??? % mencionar que la nuestra es más completa/nueva
% así no nos repetimos como el ajo
Instead of describing each of this solutions individually and then include a comparison,
the review is divided in sections which describe the main components of a Semantic \ac{ts}.


\InsertFig{venn-sec3}{fig:venn_tuplespaces_semantics}{
  Semantic \aclp{ts}.
}{
  Scope of this section.
}{0.6}{}


% Definir constantes para referirnos a los distintos middlewares analizados
\newcommand{\midtsc}{\acs{tscm} \citep{fensel_tsc_2007}}
\newcommand{\midsws}{\acs{sws} \citep{tolksdorf_coordination_2006}}
\newcommand{\midstuples}{\acs{stuples} \citep{khushraj_stuples:_2004}}
\newcommand{\midcspaces}{\acs{cspaces} \citep{martinrecuerda_towards_2005}}
\newcommand{\midtscpp}{\acs{tscpp} \citep{krummenacher_open_2009,blunder_distributed_2009}}
\newcommand{\midtripcom}{\acs{tripcom} \citep{simperl_coordination_2007}}
\newcommand{\midsmartmt}{\acs{smartm3} \citep{honkola_smart-m3_2010}}
\newcommand{\midnardini}{\citet{nardini_semantic_2013}}


\subsection{Use of semantics}

The works analyzed present two strategies to semantically annotation of data: the use of \ac{sw} standards or the definition of its own language.
The \ac{sw} rely on the \ac{rdf} metadata data model. % también lo llaman language
As the majority of the semantic \ac{ts}s, we opt for using the widely accepted \ac{rdf} to ensure interoperability \emph{ab-initio}.
On the contrary, \ac{cspaces} \citep{martinrecuerda_towards_2005} and \citet{nardini_semantic_2013} define their own language-independent up to \ac{fol} notation.
However, these works have to face an inconvenience: most of the libraries and tools available are based on the \ac{sw} standards. % concretamente cuando quieren usar reasoners!
Therefore, they have to internally translate between both worlds in a not-straightforward way. % son cosas distintas!
% theoretical counterpart of OWL DL [7]. Since OWL is the W3C standard ontology description language for the Semantic Web,
% and the standard de-facto for semantic applications in general, we adopt OWL as the ontology language for the domain
% ontologies associated to ReSpecT semantic tuple centres in TuCSoN. While for the details of OWL we forward interested

% TODO explicar diferencias, citar o evitar verengenales que no comprendo y que sólo me complican la vida?
% http://www.cs.ox.ac.uk/ian.horrocks/Seminars/download/Horrocks_Ian_pt1.pdf
%     DL == Decidable fragments of First Order Logic
% http://en.wikipedia.org/wiki/Description_logic#First_order_logic
%     Many Description Logic models (DLs) are decidable fragments of first order logic (FOL).
%     Some DLs now include operations (for example, transitive closure of roles) that allow efficient inference but cannot be expressed in FOL.


On top of \ac{rdf}, the \ac{sw} defines new layers to increase the data expressivity.
First, \ac{rdfs}\footnote{\url{http://www.w3.org/TR/rdf-schema/}} describes a series of classes and properties to define vocabularies in \ac{rdf}.
On top of \ac{rdfs}, \ac{owl}\footnote{\url{http://www.w3.org/TR/owl-features/}} offers additional vocabulary for describing properties and classes.
% 3 niveles: Lite, DL (que se corresponde con DL) y Full
These properties and classes allow to reason over the knowledge both to validate the data inserted or to infer implicit (unstated) knowledge. % implicit y unstated son redundantes, pero para que se entienda mejor


Although reasoning may be desirable, its use is tangential to the model proposed in this thesis.
In any case, it is by not means not mandatory in our solution because:
\begin{itemize}
  \item The devices which may provide information to our \emph{federated space} are autonomous.
	They share a minimal contract with our middleware where we cannot define how they manage/provide their information.
  \item It is limited by the availability of reasoners, and nowadays there is no reasoner light enough to run in a reasonable time span in small devices.
        % TODO citar algo? quizá nuestro propio trabajo?
\end{itemize}
%For our solution, describing the data semantically is a first step towards semantically interpreting it.
%The Table~\ref{tab:comparisonSemantics} shows different features regarding the semantic model proposed by each solution.

\input{2_state_of_the_art/tables/semantics}


\subsection{Tuple model}

% presentamos distintos modelos
On the one hand, several works embed semantic content in one of the fields of the tuple.
\ac{cspaces} \citep{martinrecuerda_towards_2005} defines seven-field tuple.
\ac{stuples}\citep{khushraj_stuples:_2004} extends the \emph{JavaSpace} \citep{freeman_javaspaces_1999} middleware adding a field with semantic content to the tuple object.
This content follows the DAML+OIL language (the \ac{owl} precursor).
\citet{nardini_semantic_2013} use the concept of \emph{semantic tuples} which are expressed in logic terms.


On the other hand, the most common tuple model is the three-field tuple which corresponds with a \ac{rdf} triple.
That is, a tuple with a field for the \emph{subject}, another for the \emph{predicate} and the third one for the \emph{object}.
% Sacado de la descripción de TSC que tenía antes:
% In a later work, \citet{krummenacher2006specification} proposed to use identifiers just for a set of triples (i.e. \ac{rdf} graphs).
% bundler cita el de "WWW: or what's wrong with the web" para explicar eso último
However, a triple by itself cannot express much information \citep{krummenacher2006specification}.
% también para reducir la complejidad del storage (TSC dixit)
% decir que al primero que se le ocurrió fue a TSC?
To solve this limitation, semantic \ac{ts} have usually adopted the concept of \ac{rdf} graphs too.
% En SWS usan algo muy parecido pero a lo que llaman subspace.
A \ac{rdf} graph is a set of \ac{rdf} triples identified by an \ac{uri}. % TSC distinguen entre NamedGraph (grafo con URI) y Graph (conjunto de grafos)
Although they can be accessed by their \ac{uri}, more interestingly, these middlewares also guarantee the associative access. % see the next section

\input{2_state_of_the_art/tables/tuple_model}


\subsection{Query model}

Originally, in common \ac{ts}s tuples were selected using special tuples where wildcard values were allowed in the fields.
All of the \ac{ts} middleware which use \ac{rdf} triple as a tuple use this approach.
Beside, they provide access to the \ac{rdf} graphs by their \ac{uri}'s.

Most of these works also offer advanced query languages (e.g. SPARQL\footnote{\url{http://www.w3.org/TR/rdf-sparql-query/}}) as a more expressive way to match graphs.
This languages can be decomposed by simple triple patterns.
However, this requires a parser which may not be available for resource constrained platforms.
In this thesis we focus on queries based on graph patterns and left the adoption of more complex querying languages as a future work.

\ac{cspaces}, \ac{stuples} and \citeauthor{nardini_semantic_2013} use less standard querying approaches.
\ac{cspaces} \citep{martinrecuerda_towards_2005} and \citet{nardini_semantic_2013} offer a formal language to select appropriate tuples.
\ac{stuples}\citep{khushraj_stuples:_2004} extends JavaSpace's template by adding assertional axioms that can be used to match semantic tuples.

\input{2_state_of_the_art/tables/query_model}


\subsection{Space model}

The \emph{flat} model offers independent disjoint spaces.
\ac{stuples}, \citet{nardini_semantic_2013}, TSC, tsc++ and Smart-M3 use this model.
% sTuples:
%    Bundler dice que es "Centralized nested", pero no sé de dónde lo saca
%    Está basado en Javaspaces, que por lo que puedo ver es flat
%    En nixon2008 sólo dicen que es centralized
% decir que quiere decir: Tuple Centres Spread over the Network ?
Within them, \citet{nardini_semantic_2013} presents the most singular model.
It extends TuCSoN \cite{omicini_tucson:_1998}, which presents an evolution of the \ac{ts} called \emph{tuple centre}.
A \emph{tuple centre} can be adapted to the application needs through reactions to communication operations.
These reactions allow to trigger behaviors in response to any primitives or to define new ones.
% TuCSoN follows a flat model where different independent tuple centres can coexist at the same time. % o created?
% The agents can access to remote \emph{tuple centres} and migrate to them, but these interactions need to be programmed.
% Besides, the latter three works identify each space with an \ac{uri}.


% TODO Nosotros proponemos flat spaces enriquecidos con federated spaces
% Nested
More sophisticated models allow to create hierarchies of spaces.
Three examples are \ac{sws}, \ac{tripcom} \citep{simperl_coordination_2007} and \ac{cspaces}.
% SWS -> Disjoinnt nested
% cosas relativas al despliegue
\ac{sws} \citep{tolksdorf_coordination_2006} propose two ways to partition the spaces: sub-spaces and contexts.
Sub-spaces are disjoint partitions of the main space.
Contexts enable to virtually divide the space into overlapping partitions.
These partitions are used to enable particular clients' views of the space.

% TripCom
\ac{tripcom} shares some similarities with \ac{sws}'s model.
It uses subspaces to form nested multiple spaces.
Doing so it restricts the communication to a part of the whole space leading to scalability and completeness. % según ellos
Besides, it offers a mechanism to overlap spaces called \emph{scopes}.
Using \emph{scopes} a client can create a temporary copy of some tuples.
However, any insertion and deletion would not apply to the whole Triple Space.

% CSpaces
% On the contrary of C04 where modifications need to be approved by all
% subscribers, the updates proposed by the members of a Shared CSpace are
% automatically included, and versioning mechanisms are in charge to track
% changes and provide rollback features if one of the members disagrees with
% the included updates.
% To join a Shared CSpaces and publish and retrieve data on it the new
% members should first complete a registration procedure in which one of the
% main tasks is to provide a semantic and alignment specification between the
% data that each new candidate want to share and the data that previous
% members have published beforehand.
\ac{cspaces} \citep{martinrecuerda_towards_2005} proposes two types of spaces: individual or shared.
An individual space belongs to a single process.
Two participants can agree on how to represent the knowledge to share their individual spaces forming a shared space.
Shared spaces can join to others forming a tree structure.
In a shared space the updates are versioned and can be revoked by any member.
However, neither the registration process needed for the agreement or the revocation process are detailed.
Furthermore, to the best of our knowledge, this conceptual exercise never went beyond a rather limited prototype.


\input{2_state_of_the_art/tables/space_model}



\subsection{Distribution} % o después de space model o integrado!
%	2. centralizado / distribuído
%	4. basado en clientes tontos

Participant nodes usually access to semantic spaces through client/server basis.
Tsc++ proposes an exception to the client/server access to the space.
It relies on Jxta P2P framework to propagates the queries using different strategies.
In tsc++ the spaces correspond to groups of nodes which locally manage their data.


In client/server spaces, the back-end of the server can be centralized in a single machine or distributed.
Centralized \aclp{ts} are much simpler and easier to implement.
Therefore, they usually offer more features than the distributed ones.
However, they also impose a single-point-of-failure.


Within the distributed approaches we can distinguish those works which replicate data and those which do not.
TSC belongs to the first group, and replicates all the triples in each deployed kernel.
In \ac{tripcom} each kernel stores one or more subspaces and can contact other kernels responsible for different spaces.
To do that, if the space \ac{url} is provided, it simply resolves this \ac{url} using \ac{dns} and contacts the other kernel.
Otherwise, the kernel uses three additional strategies:
\begin{itemize}
  \item Triple Provider.
	It uses shortcuts to know who answered a query in the past.
  \item Recommender.
	It uses shortcuts to know which kernel successfully routed a query in the past.
  \item Indexing - \ac{dht}.
	It creates indexes using a hash function over the subject, predicate, object and space \ac{url}.
	Then, it stores these indexes in a distributed database which relies in a structured \ac{p2p} system. % mencionar PGrid???
\end{itemize}
\ac{cspaces} uses a similar but vaguely described super-peer network \citep{martinrecuerda_application_2006}.


As discussed in Section~\ref{sec:soa_ts_ubicomp}, we also deal with distribution in one of the spaces of our hybrid model.
Specifically, we locally manage the content and we distribute the queries.
This resembles to the \emph{tsc++}'s strategy.
However, instead of using a \ac{p2p} framework to access to the contents,
we individually access to them using several \ac{http} requests. % añadir que son "parallel" o sólo liará?
In other words, each client may access to various server to obtain a result for a given primitive.

% TODO Smart-M3
% De: http://www.diem.fi/files/KP_reference%20implementation.pdf
%  The Semantic Information Broker is the information repository of the Smart 
%  Environment. In theory, the Smart-M3 Smart Space can consist of one or more SIB 
%  entities. However, the SIB reference implementation does not currently support any 
%  kind of interaction between different SIBs, which would enable distribution of the 
%  Smart Space. On the IOP, the SIB is implemented as a NoTA SN.


\input{2_state_of_the_art/tables/distribution}


\subsection{Discussion}

% Model: Triple Space
% Originalmente TSC estaba basado en REST
% Luego ha ido derivando e implementando funcionalidades más complejas alejandose del diseño inicial
%    => el interés por añadir features, hizo que la gente olvidase los ppios que guiaban la simplicidad de REST
% Nosotros proponemos una vuelta a los origenes para recuperar una simplicidad de la que limited devices pueden beneficiarse
%    => la clave para facilitar y en algunos casos posibilidar que los dispositivos constrained lo implementen


% Ver cómo TSC puede cumplir con todos los principios de diseño
% tabla de comparativa con REST
% no hay muchos que cumplan, nosotros: esto



%\subsubsection{Additional features}
%\input{2_state_of_the_art/tables/additional}


% Antigua DISCUSSION!!!

% extraer algunas conclusiones de lo que falta
% tono general: están muy bien de características, pero a la hora de hacerlo distribuido falla
% hacen aguas en proponer un modelo que pueda ser usado más allá del client-servidor
% Suitability for Ubicomp

So far, semantic \aclp{ts} solutions have offered a sophisticated models with interesting additional features.
However, in most of the cases this is possible by delegating such tasks on a subset of more powerful and static nodes.
Therefore, the distribution of the space is restricted to some nodes when in the best case, or centralized in a unique node in the worst case.
In these cases, the rest of the nodes are head toward the use of the space as simple clients.


In this thesis we will explore the most decentralized case: the one in which each node manages its own information.
Doing so, a user can carry out his profile in the smart-phone or a sensor can provide the last measures on-demand.
% sólo tsc++ seguía esa premisa

% qué es necesario para cumplir esa visión y porque las alternativas vistas no se ajustan:
% dependencias mínimas, protocolos estándares, etc.


% TODO CONCLUSION
Although both semantic space-based and Triple Spaces implementations exist, none of them has been specifically designed to be run in devices with constrained capabilities apart from our solution.