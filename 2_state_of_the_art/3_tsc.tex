\section{Semantic Tuple Spaces}
\label{sec:tsc_soa}

% Tanasescu
% swarm
% decir que tiene mucho que ver con distributed triple stores
% analizarlos también??? vaya pereza! -> igual comentar diferencia y dejar el análisis para la sección tosca de IGWS

Semantic Tuple Spaces aim to join Tuple Spaces with the Semantic Web to propose a more uncoupled solution.
Particularly, it benefits from the autonomies introduced by both TS and the SW:

\begin{itemize}
  \item Space uncoupling.
  \item Time uncoupling.
  \item Data-schema uncoupling. % explicar?
% 	enhances the interoperability of the
% 	applications built on top of TSC. This way, two applications using standard ontologies can interact among them
% 	automatically enriching one each other, as long as they use the same space and standard and linked ontologies.
\end{itemize}


In this section we provide a review of the existing Semantic Tuple Spaces solutions. % citar nixon_tuplespace-based_2008 ???
To summarize, we present a comparison of them at the end of the section, analyzing their limitations.


\InsertFig{venn-sec3}{fig:venn_tuplespaces_semantics}{
  Semantic Tuple Spaces.
}{
  Scope of this section.
}{0.6}{}


\subsection{TSC}
% modelo propuesto
TSC \cite{fensel_tsc_2007} is the middleware which first implemented the ideas of Fensel et al. \cite{fensel_triple-space_2004}.
TSC aims to propose a Triple Space Computing infrastructure based on REST.
Equivalently to REST, TSC proposes a stateless infrastructure where the resources are identified by URIs.
In the first approximation, each tuple was considered a resource.
These tuples correspond with RDF triples.
In a later work,  Krummenacher et al. \cite{krummenacher2006specification} proposed to use identifiers just for a set of triples (i.e. RDF graphs).
% bundler cita el de "WWW: or what's wrong with the web" para explicar eso último
They argue that resources usually need to be modeled using more than just a triple.
Besides, the use of graphs reduces the complexity on storage.
To cope with the heterogeneity of data and scalability issues, they propose the use of independent spaces identified by their own URI.
Using these disjoint spaces, they can restrict the number of participant in each one.


% cosas relativas al despliegue
TSC combines client/server and peer-to-peer architectures using a hybrid super-peer one.
The super-peers of this architecture communicate with each other using a middleware which offers a virtual shared memory space of Java objects.
They present 3 different types of nodes:
\begin{itemize}
  \item The \emph{servers} are the responsible for storing and replicating the spaces.
  \item The \emph{heavy clients} are not always connected to the system, but they have the same responsibilities as the \emph{servers}.
	They can work off-line with their replicas.
  \item The \emph{light clients} can access to the spaces using proxies or an HTTP API.
\end{itemize}


% arquitectura
TSC consist of three main components: a mediation engine, a data access layer and a coordination layer.
The mediation engine manages data heterogeneity by intermediating between nodes using different data schemas.
The data access layer ensures persistence of the data, supports template matching and provides some reasoning over the knowledge stored.
The coordination layer replicates named graphs to all involved TS kernels and therefore has to be synchronized with the data access.
% http://tsc.deri.at/deliverables/D21.html
% http://tsc.deri.at/deliverables/D31/D31.html
To do that, they use a peer-to-peer implementation of a virtual shared data space. % cita a CORSO?
% decir que ofrece transaccionalidad gracias a CORSO? transactionality
% It also offers a transactional context and a simple form to publish and subscribe to certain patterns.



\subsection{Semantic Web Spaces}

% modelo propuesto
Semantic Web Spaces (SWS) defines two different data coordination views: data view and information view. %TODO CITE
In both views the tuples are represented with 3 fields which correspond with RDF triples' subject, predicate and subject.
The data view stores syntactically valid RDF and is accessed using Linda primitives.
The information view stores consistent and satisfiable data and offers new access primitives.
This view takes into account the knowledge defined by ontologies to perform semantic matching over inferred triples.

% cosas relativas al despliegue
SWS are virtually partitioned using contexts, which provide a simple form of access control.
Clients can allocate contexts to control their view privately or share it with other clients. % This allow clustering ¿WTF?
The different active spaces and the tuples they contain are represented in a meta-space using a meta-model ontology.
This ontology also allows to express the hierarchical relation between the spaces and security policies.

% arquitectura
The prototype contains three main components: publication, retrieval and security.
The publication component describes how the platform communicates with the clients or storage managers.
The retrieval component process queries and can reason to enhance results. % no se razona cada vez que se inserta una tupla
The security component restrict the access of client to spaces according to the policies defined.  % hablan de agentes
% dicen que experimentaron problemas de escalabilidad



\subsection{Conceptual Spaces}

Conceptual Spaces, or cSpaces, were born to study the applicability of semantic tuplespaces to different scenarios including ubiquitous computing.


\subsection{sTuples}
 sTuples was conceived by Nokia Research Center as a pervasive
computing work and provides description logics reasoning and a semantic extension of JavaSpace tuplespace middleware.


sTuples \cite{khushraj_stuples:_2004} fue concebido por Nokia Research Center como un trabajo de computación ubicua que provee razonamiento de lógica descriptiva y extensión semántica del middleware de \textit{tuplespace} JavaSpace. En sTuples existe una elemento denominado gestor (o \textit{manager}) encargado de mediar entre los clientes, servicios y agentes recomendadores.


\subsection{tsc++}

tsc++ \cite{krummenacher_open_2009} is a new version of the former TSC project\cite{fensel_triple-space_2004} which basically offers
the same API in a distributed way. To do that, tsc++ uses Jxta Peer To Peer \footnote{https://jxta.dev.java.net/} framework to perform the
coordination and Sesame \cite{broekstra_sesame:_2002} and Owlim \cite{kiryakov_owlimpragmatic_2005} to store triples of each peer.

The nodes in tsc++ not only can query the space, but they can also store their own information, enabling the distribution
of the space over all the peers by means of the strategy known as negative broadcast. In negative broadcasting the nodes
of a group write the information locally and read querying to the rest of the nodes. This seems to adapt to
ubiquitous system, where different devices share heterogeneous data entering and leaving the system, compromising data consistency
and availability. In this aspect a sensor can provide information, but when it leaves the space, its information is automatically
removed from there since it is not longer available to the rest of the nodes. Anyway, as explained in section \ref{sec:services},
negative broadcasting needs to be adapted to those cases in which a device wants to remotely change the state of actuators managed
by another device.

Nevertheless, tsc++ lacks some of the advantages of other alternatives: it does not make inference, it does not allow expressive querying
and last but not least, it has not been designed for devices with reduced computing capabilities, because tsc++ middleware focused on
architecture and implementation in large scale and we focus in the short scale (local area networks with an intelligent environment).


\subsection{Triple Space Communication (TripCom)}
% modelo propuesto
Semantic Web Spaces propose some new primitives defining
two different data coordination views: data view (with syntactically valid RDF and Linda primitives) and information view
(with consistent and satisfiable data and new primitives).
% definen 2 vistas con primitivas
% los espacios pueden ser nested o flat
% tuplas son tripletas (3 campos)

% cosas relativas al despliegue


% arquitectura

TripCom\footnote{TripCom (IST-4-027324-STP, www.tripcom.org)} uses a hybrid solution where information is distributed on
an overlay network made up of different kernels using a distributed hash table. Each kernel stores some triples and
knows where the rest of the triples are located by using a hash function. The clients have to know one of these
kernels to address their queries through them. TripCom was conceived to store a huge amount of RDF triples taking
special care of the scalability issues.


TripCom\footnote{TripCom (IST-4-027324-STP, www.tripcom.org)} has different kernels hosted in servers which can distribute the semantic data
through themselves, but once again, is too server centered. TripCom clients are not part of the space and they could hardly be, because of
the complexity of this software which is oriented to run on powerful machines (it is designed to be able to run even different modules of the
same kernel in different machines).


\subsection{Smart-M3}

Remarkably, recently the Smart M3 middleware proposed an
architecture where so called Semantic Information Brokers (SIB) store the information and perform reasoning
process on behalf of the clients or Knowledge Processors (KP). Unfortunately, no scenario with more than a SIB has been
presented yet, making it de facto centralized.


\subsection{TuCSoN}



\subsection{Conclusion} % comparison

% presentar características
% poner tabla
% extraer algunas conclusiones de lo que falta

% Parámetros para comparativa:
%	1. niveles de autonomía
%	2. centralizado / distribuído
%	3. centrado en ubicomp o no
%	4. basado en clientes tontos
%	5. Implementado?
%	6. Implementación disponible
%	7. Otras características
%	8. dependencias: librerias, etc. (para decir que lo nuestro se puede implementar en casi cualquier plataforma de forma fácil)



None of this projects were fully distributed and they were deployed over more or less a client-based architecture which did not implement the tuplespace paradigm itself in mobile peers and which restricted the reasoning process to few powerful devices.

De las soluciones anteriormente mencionadas, ninguna puede considerarse como totalmente distribuida. Su despliegue se realiza sobre una arquitectura en la que los móviles son simples clientes que no implementan el paradigma del \textit{tuplespace}. Dicho de otra forma, estas soluciones restringen el proceso de computación a dispositivos con mayor potencia relegando a los primeros en un papel plenamente secundario en los sistemas planteados. Debido a que la información en IoT es a menudo generada en dispositivos embebidos y su validez expira con extremada rapidez (al tratarse de información proveniente de sensores), estos enfoques no son validos al requerir intermediarios y no permitir el acceso directo a dicha información. Por otro lado, en el caso de la información almacenada en un dispositivo móvil, otros aspectos relacionados con la privacidad de la misma dificultan el uso de intermediarios en muchos escenarios.

Finalmente, en lo que a TS propiamente dicho se refiere, actualmente existen dos implementaciones del middleware de computación Triple Space: tsc++ y TripCom. TripCom\cite{tripcom_2011} dispone de diferentes núcleos alojados en servidores que pueden distribuir la información semántica entre ellos. En TripCom los clientes no son parte del espacio, y por la complejidad del software, orientado a ejecutarse en máquinas potentes donde los módulos que componen el núcleo pueden llegar a desplegarse en diferentes máquinas, sería imposible que lo fuesen. Es por tanto una solución realizada pensando en grandes sistemas y no en entornos con multitud de dispositivos con capacidades reducidas como IoT.

TSC fue el primer proyecto \textit{Triple Space}. En TSC, las tripletas se interrelacionan para formar grafos y permiten realizar consultas sobre ellos a través de plantillas. También ofrece un contexto transaccional y un procedimiento para publicar y suscribirse a diferentes patrones. Tsc++ \cite{krummenacher_open_2009} es una nueva versión del proyecto TSC original \cite{fensel_triple-space_2004}, que básicamente ofrece la misma API de una manera distribuida. Para ello, tsc++ utiliza el \textit{framework} Peer to Peer Jxta \footnote{https://jxta.dev.java.net/} para llevar a cabo la coordinación entre nodos y Sesame \cite{broekstra_sesame:_2002} y Owlim \cite{kiryakov_owlimpragmatic_2005} para almacenar las tripletas en cada uno.

Los nodos en tsc++ almacenan su propia información permitiendo la distribución del espacio a través de todos los nodos que lo forman. Esta estrategia, donde la información se escribe en local y las consultas se propagan al resto de nodos de un grupo, es conocida como \textit{negative broadcasting}. \textit{Negative broadcasting} se adapta al funcionamiento de los sistemas ubicuos donde diferentes dispositivos comparten información heterogénea entrando y saliendo del sistema, comprometiendo la consistencia y la disponibilidad de la información. En este aspecto un sensor puede proveer una determinada información, pero cuando abandona el espacio su información se elimina automáticamente, ya que no está disponible para el resto de nodos. En cualquier caso, esta estrategia también presenta limitaciones en los casos en los que un dispositivo quiere modificar remotamente el estado de un actuador gestionado por otro dispositivo.

Resumiendo, de todas las soluciones tuplespace analizadas, las que resultan especialmente relevantes son LIME y tsc++. La primera por su orientación a dispositivos con capacidad de computo limitada y tsc++ por ser una solución de \textit{Triple Space} con una estrategia de distribución de tripletas en todos los nodos lo suficientemente sencilla y flexible como para poder ser adaptada y ser usada en los entornos para los que la tesis plantea adaptar TS. La combinación de muchas características de ambas soluciones en conjunción con aspectos no tratados como el tratamiento más complejo de los contenidos dentro de un mismo espacio ofrecería una solución mucho más adecuada para entornos IoT.



% Apoyar mi comparativa en lo que dice Bundler? (pag 16)
% El paper comparativo extrae un montón de características


% TODO CONCLUSION
Although both semantic space-based and Triple Spaces implementations exist, none of them has been specifically designed to be run in devices with constrained capabilities apart from our solution.